<?xml version="1.0"?>
<configuration>
  <configSections>
    <!--log4配置节-->
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Util.Commons"/>
  </configSections>
  <log4net>
    <!--根配置-->
    <root>
      <!--日志级别:可选值: OFF > FATAL > ERROR > WARN > INFO > DEBUG  > ALL -->
      <level value="DEBUG"/>
      <!--输出到调试日志: Debug.log-->
      <appender-ref ref="DebugAppender"/>
      <!--输出到信息日志: Info.log-->
      <appender-ref ref="InfoAppender"/>
      <!--输出到警告日志: Warn.log-->
      <appender-ref ref="WarnAppender"/>
      <!--输出到错误日志: Error.log-->
      <appender-ref ref="ErrorAppender"/>
      <!--输出到致命错误日志: Fatal.log-->
      <appender-ref ref="FatalAppender"/>
      <!--数据库日志-->
      <appender-ref ref="DatabaseAppender"/>
    </root>
    <!--Sql跟踪配置-->
    <logger name="SqlTraceLog">
      <level value="DEBUG" />
      <appender-ref ref="SqlAppender" />
    </logger>
    <!--授权跟踪配置-->
    <logger name="AuthorizeTraceLog">
      <level value="DEBUG" />
      <appender-ref ref="AuthorizeAppender" />
    </logger>
    <!--控件跟踪配置-->
    <logger name="ControlTraceLog">
      <level value="DEBUG" />
      <appender-ref ref="ControlAppender" />
    </logger>

    <!--sql.log-->
    <appender name="SqlAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/sql/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;sql.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="200MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--authorize.log-->
    <appender name="AuthorizeAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/authorize/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;authorize.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="200MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--control.log-->
    <appender name="ControlAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/control/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;control.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="200MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--Debug.log-->
    <appender name="DebugAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--过滤Sql跟踪-->
      <filter type="log4net.Filter.LoggerMatchFilter">
        <param name="LoggerToMatch" value="SqlTraceLog" />
        <param name="AcceptOnMatch" value="false" />
      </filter>
      <!--过滤授权模块跟踪-->
      <filter type="log4net.Filter.LoggerMatchFilter">
        <param name="LoggerToMatch" value="AuthorizeTraceLog" />
        <param name="AcceptOnMatch" value="false" />
      </filter>
      <!--过滤控件跟踪-->
      <filter type="log4net.Filter.LoggerMatchFilter">
        <param name="LoggerToMatch" value="ControlTraceLog" />
        <param name="AcceptOnMatch" value="false" />
      </filter>
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="DEBUG" />
        <param name="LevelMax" value="DEBUG" />
      </filter>
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/debug/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;debug.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="2MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--Info.log-->
    <appender name="InfoAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="INFO" />
        <param name="LevelMax" value="INFO" />
      </filter>
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/info/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;info.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="2MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--Warn.log-->
    <appender name="WarnAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="WARN" />
        <param name="LevelMax" value="WARN" />
      </filter>
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/warn/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;warn.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="2MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--Error.log-->
    <appender name="ErrorAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="ERROR" />
        <param name="LevelMax" value="ERROR" />
      </filter>
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/error/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;error.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="2MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--Fatal.log-->
    <appender name="FatalAppender" type="log4net.Appender.RollingFileAppender,Util.Commons">
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="FATAL" />
        <param name="LevelMax" value="FATAL" />
      </filter>
      <!--目录路径，可以是相对路径或绝对路径-->
      <param name="File" value="c:/log/wechat/application/fatal/"/>
      <!--文件名，按日期生成文件夹-->
      <param name="DatePattern" value="/yyyy-MM-dd/&quot;fatal.log&quot;"/>
      <!--追加到文件-->
      <appendToFile value="true"/>
      <!--创建日志文件的方式，可选值：Date[日期],文件大小[Size],混合[Composite]-->
      <rollingStyle value="Composite"/>
      <!--写到一个文件-->
      <staticLogFileName value="false"/>
      <!--单个文件大小。单位:KB|MB|GB-->
      <maximumFileSize value="2MB"/>
      <!--最多保留的文件数，设为"-1"则不限-->
      <maxSizeRollBackups value="-1"/>
      <!--日志格式-->
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message"/>
      </layout>
    </appender>

    <!--数据库日志-->
    <appender name="DatabaseAppender" type="log4net.Appender.AdoNetAppender">
      <!--过滤-->
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="INFO"/>
        <param name="LevelMax" value="FATAL"/>
      </filter>
      <!--缓冲区大小，值为100表示输出日志达到100条时才一次写入数据库，1表示不缓存-->
      <bufferSize value="100" />
      <!--连接组件类型-->
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <!--连接字符串-->
      <connectionstring value="server=39.108.113.43;database=DXPMallDbLog;uid=sa;pwd=sql2012.;MultipleActiveResultSets=true" />
      <!--SQL语句-->
      <commandText value="INSERT INTO [Logs].[OperationLogs](
                   [LogName],[Level],[TraceId],[OperationTime],[Duration],[Url],
                   [BusinessId],[Application],[Tenant],[Category],
                   [Class],[Method],[Params],
                   [Ip],[Host],[Browser],[ThreadId],
                   [UserId],[Operator],[Role],
                   [Caption],[Content],[Sql],[SqlParams],
                   [ErrorCode],[Error],[StackTrace] ) 
                   VALUES(@LogName,@Level,@TraceId,@OperationTime,@Duration,@Url,
                   @BusinessId,@Application,@Tenant,@Category,
                   @Class,@Method,@Params,
                   @Ip,@Host,@Browser,@ThreadId,
                   @UserId,@Operator,@Role,
                   @Caption,@Content, @Sql,@SqlParams,
                   @ErrorCode,@Error,@StackTrace)"/>
      <!--==========SQL参数=========-->
      <!--日志名称-->
      <parameter>
        <parameterName value="@LogName" />
        <dbType value="String" />
        <size value="50" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{LogName}" />
        </layout>
      </parameter>
      <!--日志级别-->
      <parameter>
        <parameterName value="@Level" />
        <dbType value="String" />
        <size value="10" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Level}" />
        </layout>
      </parameter>
      <!--跟踪号-->
      <parameter>
        <parameterName value="@TraceId" />
        <dbType value="String" />
        <size value="40" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{TraceId}" />
        </layout>
      </parameter>
      <!--操作时间-->
      <parameter>
        <parameterName value="@OperationTime" />
        <dbType value="String" />
        <size value="40" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{OperationTime}" />
        </layout>
      </parameter>
      <!--持续时间-->
      <parameter>
        <parameterName value="@Duration" />
        <dbType value="String" />
        <size value="50" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Duration}" />
        </layout>
      </parameter>
      <!--网址-->
      <parameter>
        <parameterName value="@Url" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Url}" />
        </layout>
      </parameter>
      <!--业务编号-->
      <parameter>
        <parameterName value="@BusinessId" />
        <dbType value="String" />
        <size value="40" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{BusinessId}" />
        </layout>
      </parameter>
      <!--应用程序-->
      <parameter>
        <parameterName value="@Application" />
        <dbType value="String" />
        <size value="100" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Application}" />
        </layout>
      </parameter>
      <!--租户-->
      <parameter>
        <parameterName value="@Tenant" />
        <dbType value="String" />
        <size value="100" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Tenant}" />
        </layout>
      </parameter>
      <!--分类-->
      <parameter>
        <parameterName value="@Category" />
        <dbType value="String" />
        <size value="50" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Category}" />
        </layout>
      </parameter>
      <!--类名-->
      <parameter>
        <parameterName value="@Class" />
        <dbType value="String" />
        <size value="200" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Class}" />
        </layout>
      </parameter>
      <!--方法名-->
      <parameter>
        <parameterName value="@Method" />
        <dbType value="String" />
        <size value="50" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Method}" />
        </layout>
      </parameter>
      <!--参数-->
      <parameter>
        <parameterName value="@Params" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Params}" />
        </layout>
      </parameter>
      <!--Ip-->
      <parameter>
        <parameterName value="@Ip" />
        <dbType value="String" />
        <size value="30" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Ip}" />
        </layout>
      </parameter>
      <!--主机-->
      <parameter>
        <parameterName value="@Host" />
        <dbType value="String" />
        <size value="50" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Host}" />
        </layout>
      </parameter>
      <!--浏览器-->
      <parameter>
        <parameterName value="@Browser" />
        <dbType value="String" />
        <size value="200" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Browser}" />
        </layout>
      </parameter>
      <!--线程号-->
      <parameter>
        <parameterName value="@ThreadId" />
        <dbType value="String" />
        <size value="12" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{ThreadId}" />
        </layout>
      </parameter>
      <!--用户编号-->
      <parameter>
        <parameterName value="@UserId" />
        <dbType value="String" />
        <size value="30" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{UserId}" />
        </layout>
      </parameter>
      <!--操作人姓名-->
      <parameter>
        <parameterName value="@Operator" />
        <dbType value="String" />
        <size value="30" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Operator}" />
        </layout>
      </parameter>
      <!--操作人角色-->
      <parameter>
        <parameterName value="@Role" />
        <dbType value="String" />
        <size value="30" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Role}" />
        </layout>
      </parameter>
      <!--标题-->
      <parameter>
        <parameterName value="@Caption" />
        <dbType value="String" />
        <size value="100" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Caption}" />
        </layout>
      </parameter>
      <!--操作内容-->
      <parameter>
        <parameterName value="@Content" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Content}" />
        </layout>
      </parameter>
      <!--Sql语句-->
      <parameter>
        <parameterName value="@Sql" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Sql}" />
        </layout>
      </parameter>
      <!--Sql参数-->
      <parameter>
        <parameterName value="@SqlParams" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{SqlParams}" />
        </layout>
      </parameter>
      <!--错误码-->
      <parameter>
        <parameterName value="@ErrorCode" />
        <dbType value="String" />
        <size value="10" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{ErrorCode}" />
        </layout>
      </parameter>
      <!--错误消息-->
      <parameter>
        <parameterName value="@Error" />
        <dbType value="String" />
        <size value="2000" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{Error}" />
        </layout>
      </parameter>
      <!--堆栈跟踪-->
      <parameter>
        <parameterName value="@StackTrace" />
        <dbType value="String" />
        <size value="-1" />
        <layout type="Util.Logs.Layouts.CustomLayout,Util.Commons,Version=1.0.0.0, Culture=neutral,PublicKeyToken=39e1029071635b8b">
          <conversionPattern value="%property{StackTrace}" />
        </layout>
      </parameter>
    </appender>
  </log4net>
</configuration>